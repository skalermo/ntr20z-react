(this["webpackJsonpschool-scheduler"]=this["webpackJsonpschool-scheduler"]||[]).push([[0],{27:function(t,e,c){},33:function(t,e,c){},34:function(t,e,c){"use strict";c.r(e);var n=c(0),s=c(1),o=c(16),i=c.n(o),a=(c(27),c(17)),l=c(18),r=c(21),j=c(20),h=c(4),b=c(3);var u=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{class:"text-center",children:Object(n.jsx)("p",{class:"h3",children:"Welcome to the SchoolScheduler"})}),Object(n.jsxs)("div",{class:"text-center",children:[Object(n.jsx)(h.b,{class:"btn btn-link btn-lg",to:"/teachers",children:"Teachers"}),Object(n.jsx)(h.b,{class:"btn btn-link btn-lg",to:"/activities",children:"Activities"})]})]})},d=c(2),O=function(t){var e=t.hide,c=t.type,s=t.msg;if(e)return null;switch(c){case"success":return Object(n.jsx)("div",{class:"alert alert-success",children:s});case"danger":return Object(n.jsx)("div",{class:"alert alert-danger",children:s});default:return null}};var f=function(){var t=Object(s.useState)([]),e=Object(d.a)(t,2),c=e[0],o=e[1],i=Object(s.useState)(!0),a=Object(d.a)(i,2),l=a[0],r=a[1],j=Object(s.useState)(),b=Object(d.a)(j,2),u=b[0],f=b[1],p=Object(s.useState)(""),x=Object(d.a)(p,2),v=x[0],m=x[1];Object(s.useEffect)((function(){setTimeout((function(){r(!0)}),5e3)}),[]);var g=function(){fetch("http://localhost:8081/teachers").then((function(t){return t.json()})).then((function(t){o(t)})).catch(console.log)};Object(s.useEffect)((function(){g()}),[]);var y=function(t){var e=t.idx,c=t.name;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:c}),Object(n.jsxs)("td",{children:[Object(n.jsx)(h.b,{class:"btn btn-link",to:{pathname:"/teacherForm",state:{idx:e,name:c}},children:"Edit"}),Object(n.jsx)("button",{onClick:function(){var t;t=e,console.log("Deleting teacher: id="+t),fetch("http://localhost:8081/teachers/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){204===t.status?(g(),f("success")):f("danger"),r(!1),m(t.statusText)})).catch(console.log)},name:"deleteButton",value:e,class:"btn btn-link",children:"Delete"})]})]})};return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Teachers"}),Object(n.jsx)(O,{hide:l,type:u,msg:v}),Object(n.jsx)(h.b,{class:"btn btn-link",to:"/teacherForm",children:"Add new teacher"}),Object(n.jsxs)("table",{class:"table table-hover",children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Teacher"}),Object(n.jsx)("th",{children:"Actions"})]}),c.map((function(t,e){return Object(n.jsx)(y,{idx:e,name:t})}))]})]})};var p=function(){var t,e,c=Object(b.f)().state;c&&"idx"in c&&(t=c.idx),c&&"name"in c&&(e=c.name);var o=Object(s.useState)((function(){return"undefined"!==typeof e?e:""})),i=Object(d.a)(o,2),a=i[0],l=i[1],r=Object(s.useState)(!0),j=Object(d.a)(r,2),u=j[0],f=j[1],p=Object(s.useState)(),x=Object(d.a)(p,2),v=x[0],m=x[1],g=Object(s.useState)(""),y=Object(d.a)(g,2),S=y[0],T=y[1];return Object(s.useEffect)((function(){setTimeout((function(){f(!0)}),5e3)}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Teacher Form"}),Object(n.jsx)(h.b,{class:"btn btn-link",to:"/teachers",children:"Back to teachers list"}),Object(n.jsx)(O,{hide:u,type:v,msg:S}),Object(n.jsx)("input",{type:"hidden",value:t}),Object(n.jsxs)("div",{class:"form-group",children:[Object(n.jsx)("label",{children:"Teacher"}),Object(n.jsx)("input",{type:"text",class:"form-control",placeholder:"John Smith",value:a,onInput:function(t){return l(t.target.value)}})]}),Object(n.jsx)("button",{type:"submit",onClick:function(){"undefined"===typeof t?function(t){console.log("Adding new teacher: ".concat(t));var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({newTeacher:t})};fetch("http://localhost:8081/teachers",e).then((function(t){console.log(t.status),201===t.status?m("success"):m("danger"),f(!1),T(t.statusText)}))}(a):function(t,e){console.log("Updating teacher: #".concat(t," ").concat(e));var c={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({teacher:e})};fetch("http://localhost:8081/teachers/".concat(t),c).then((function(t){console.log(t.status),200===t.status?m("success"):m("danger"),f(!1),T(t.statusText)}))}(t,a)},class:"btn btn-primary",children:"Submit"})]})},x=(c(33),["time","Mo","Tu","We","Th","Fr"]),v=["8:00-8:45","8:55-9:40","9:50-11:35","11:55-12:40","12:50-13:55","13:45-14:30","14:40-15:25","15:35-16:20","16:30-17:15"];var m=function(){var t=Object(s.useState)(),e=Object(d.a)(t,2),c=e[0],o=e[1],i=Object(s.useState)([]),a=Object(d.a)(i,2),l=a[0],r=a[1],j=Object(s.useState)([]),b=Object(d.a)(j,2),u=b[0],O=b[1],f=Object(s.useRef)(!0);return Object(s.useEffect)((function(){fetch("http://localhost:8081/groups").then((function(t){return t.json()})).then((function(t){0===l.length&&(r(t),o(0)),r(t)})).catch(console.log)}),[]),Object(s.useEffect)((function(){f.current?f.current=!1:function(t){fetch("http://localhost:8081/groups/".concat(t,"/activities")).then((function(t){return t.json()})).then((function(t){var e=Array(45).fill().map((function(t,e){return{slot:e,activityId:void 0,label:""}}));t.forEach((function(t){var c=t.idx,n=t.a;e[n.slot]={slot:n.slot,activityId:c,label:[n.room,n.subject].join(" ")}})),O(e)})).catch(console.log)}(c)}),[c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Activities"}),Object(n.jsx)("div",{class:"modal-body",children:Object(n.jsxs)("div",{class:"form-group row",children:[Object(n.jsx)("label",{class:"col-form-label",children:"Group"}),Object(n.jsx)("div",{class:"col-sm-3",children:Object(n.jsx)("select",{class:"form-control",onChange:function(t){return o(t.target.value)},children:l&&l.length&&l.map((function(t,e){return Object(n.jsx)("option",{value:e,children:t})}))})})]})}),void 0===c?Object(n.jsx)("p",{children:"Select group to load schedule table"}):Object(n.jsxs)("div",{class:"wrapper",children:[x.map((function(t){return Object(n.jsx)("div",{class:"slot header",children:t})})),u&&u.map((function(t,e){var s=t.slot,o=t.activityId,i=t.label;return e%5==0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{class:"slot index",children:v[e/5]}),Object(n.jsx)(h.b,{class:"fill-div slot",to:{pathname:"/activityForm",state:{slot:s,activityId:o,selectedGroup:l[c]}},children:i})]}):Object(n.jsx)(h.b,{class:"fill-div slot",to:{pathname:"/activityForm",state:{slot:s,activityId:o,selectedGroup:l[c]}},children:i})}))]})]})};var g=function(){var t,e,c,o=Object(s.useState)(),i=Object(d.a)(o,2),a=i[0],l=i[1],r=Object(s.useState)([]),j=Object(d.a)(r,2),u=j[0],f=j[1],p=Object(s.useState)([]),x=Object(d.a)(p,2),v=x[0],m=x[1],g=Object(s.useState)([]),y=Object(d.a)(g,2),S=y[0],T=y[1],k=Object(s.useState)(),C=Object(d.a)(k,2),A=C[0],E=C[1],F=Object(s.useState)(),w=Object(d.a)(F,2),I=w[0],D=w[1],J=Object(s.useState)(),G=Object(d.a)(J,2),P=G[0],B=G[1],L=Object(s.useState)(!0),N=Object(d.a)(L,2),U=N[0],R=N[1],W=Object(s.useState)(!0),H=Object(d.a)(W,2),M=H[0],q=H[1],z=Object(s.useState)(),K=Object(d.a)(z,2),Q=K[0],V=K[1],X=Object(s.useState)(""),Y=Object(d.a)(X,2),Z=Y[0],$=Y[1];Object(s.useEffect)((function(){setTimeout((function(){q(!0)}),5e3)}),[]);var _=Object(b.f)().state;return _&&"slot"in _&&(t=_.slot),_&&"activityId"in _&&(e=_.activityId),_&&"selectedGroup"in _&&(c=_.selectedGroup),Object(s.useEffect)((function(){fetch("http://localhost:8081/activities/".concat(e)).then((function(t){return t.json()})).then((function(t){var e=t;l(e),E(e.room),B(e.subject),D(e.teacher)})).catch(console.log),function(t,e){fetch("http://localhost:8081/rooms?excludeForSlot=".concat(t,"&includeForActivity=").concat(e)).then((function(t){return t.json()})).then((function(t){f(t)})).catch(console.log)}(t,e),function(t,e){fetch("http://localhost:8081/teachers?excludeForSlot=".concat(t,"&includeForActivity=").concat(e)).then((function(t){return t.json()})).then((function(t){T(t)})).catch(console.log)}(t,e),fetch("http://localhost:8081/subjects").then((function(t){return t.json()})).then((function(t){m(t)})).catch(console.log)}),[]),Object(s.useEffect)((function(){A&&I&&P&&R(!1)}),[A,I,P]),Object(n.jsxs)("div",{children:[Object(n.jsx)(h.b,{class:"btn btn-link",to:"/activities",children:"Back to activities"}),Object(n.jsx)(O,{hide:M,type:Q,msg:Z}),Object(n.jsxs)("div",{class:"form-group",children:[Object(n.jsx)("label",{children:"Room"}),Object(n.jsxs)("select",{class:"form-control",onChange:function(t){return E(t.target.value)},children:[function(){if(void 0===a)return Object(n.jsx)("option",{disabled:!0,selected:!0,children:"Select room"})}(),u&&u.map((function(t){return t===(a&&a.room)?Object(n.jsx)("option",{selected:!0,children:t}):Object(n.jsx)("option",{children:t})}))]}),Object(n.jsx)("label",{children:"Group"}),Object(n.jsx)("select",{class:"form-control",disabled:!0,children:Object(n.jsx)("option",{children:c})}),Object(n.jsx)("label",{children:"Subject"}),Object(n.jsxs)("select",{class:"form-control",onChange:function(t){return B(t.target.value)},children:[function(){if(void 0===a)return Object(n.jsx)("option",{disabled:!0,selected:!0,children:"Select subject"})}(),v&&v.map((function(t){return t===(a&&a.subject)?Object(n.jsx)("option",{selected:!0,children:t}):Object(n.jsx)("option",{children:t})}))]}),Object(n.jsx)("label",{children:"Teacher"}),Object(n.jsxs)("select",{class:"form-control",onChange:function(t){return D(t.target.value)},children:[function(){if(void 0===a)return Object(n.jsx)("option",{disabled:!0,selected:!0,children:"Select teacher"})}(),S&&S.map((function(t){return t===(a&&a.teacher)?Object(n.jsx)("option",{selected:!0,children:t}):Object(n.jsx)("option",{children:t})}))]})]}),Object(n.jsx)("button",{class:"btn btn-primary mr-2",onClick:function(){var n={room:A,group:c,subject:P,slot:t,teacher:I,id:void 0};void 0===a?function(t){console.log("Adding new activity: ".concat(t));var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({newActivity:t})};fetch("http://localhost:8081/activities",e).then((function(t){console.log(t.status),201===t.status?V("success"):V("danger"),$(t.statusText),q(!1)}))}(n):(n.id=e,function(t,e){console.log("Updating activity: #".concat(t," ").concat(e));var c={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({activity:e})};fetch("http://localhost:8081/activities/".concat(t),c).then((function(t){console.log(t.status),200===t.status?V("success"):V("danger"),$(t.statusText),q(!1)}))}(e,n))},disabled:U,children:"Save"}),Object(n.jsx)("button",{class:"btn btn-secondary",onClick:function(){var t;t=e,console.log("Deleting activity: #".concat(t)),fetch("http://localhost:8081/activities/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){console.log(t.status),204===t.status?V("success"):V("danger"),$(t.statusText),q(!1)}))},disabled:void 0===a,children:"Delete this activity"})]})},y=function(){return Object(n.jsx)("header",{children:Object(n.jsx)("nav",{class:"navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3",children:Object(n.jsxs)("div",{class:"container",children:[Object(n.jsx)("div",{class:"navbar-brand",children:"School Scheduler"}),Object(n.jsxs)("ul",{class:"nav navbar-nav",children:[Object(n.jsx)("li",{children:Object(n.jsx)(h.b,{class:"nav-link",to:"/",children:"Home"})}),Object(n.jsx)("li",{children:Object(n.jsx)(h.b,{class:"nav-link",to:"/teachers",children:"Teachers"})}),Object(n.jsx)("li",{children:Object(n.jsx)(h.b,{class:"nav-link",to:"/activities",children:"Activities"})})]})]})})})},S=function(t){Object(r.a)(c,t);var e=Object(j.a)(c);function c(){return Object(a.a)(this,c),e.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(y,{}),Object(n.jsx)("div",{class:"container",children:Object(n.jsx)("main",{role:"main",class:"pb-3",children:Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/",children:Object(n.jsx)(u,{})}),Object(n.jsx)(b.a,{path:"/teachers",children:Object(n.jsx)(f,{})}),Object(n.jsx)(b.a,{path:"/teacherForm",children:Object(n.jsx)(p,{})}),Object(n.jsx)(b.a,{path:"/activities",children:Object(n.jsx)(m,{})}),Object(n.jsx)(b.a,{path:"/activityForm",children:Object(n.jsx)(g,{})}),Object(n.jsx)(b.a,{path:"/",children:Object(n.jsx)("p",{children:"404 - Check your url please"})})]})})})]})}}]),c}(s.Component),T=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(e){var c=e.getCLS,n=e.getFID,s=e.getFCP,o=e.getLCP,i=e.getTTFB;c(t),n(t),s(t),o(t),i(t)}))};i.a.render(Object(n.jsx)(h.a,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),T()}},[[34,1,2]]]);
//# sourceMappingURL=main.36bb1dec.chunk.js.map